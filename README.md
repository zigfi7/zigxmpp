# ZigXMPP

A minimal, one-file XMPP server written in pure Python â€” designed for simplicity, portability, and rapid deployment in air-gapped or internal environments.

**UUID-based identity, file-based storage, no dependencies, no federation. Just works.**

---

## âœ¨ Why ZigXMPP?

ZigXMPP is not a full-featured XMPP stack. It is a focused, self-contained, embeddable microserver that uses the XMPP protocol **only as a transport layer** â€” so you can use existing clients like:

- âœ… **Gajim**, **Dino**, **Pidgin**, **Xabber**, etc.
- âœ… No need to develop your own clients
- âœ… No need for complex DNS/federation setups

This project follows the **KISS principle**:  
> Keep It Simple, Stupid.

---

## ğŸ§­ Key Features

- ğŸ§ UUID-based user identity (stable and secure)
- ğŸ—‚ï¸ File-based storage (JSON)
- ğŸ”’ TLS and STARTTLS support (self-signed certs auto-generated)
- ğŸ¤ Multiple clients per account (resource binding supported)
- ğŸ§‘â€ğŸ¤â€ğŸ§‘ Roster and presence support
- ğŸ’¬ MUC (multi-user chat) with persistent history
- â¬†ï¸ HTTP file uploads (XEP-0363)
- ğŸ§ª Basic XMPP feature compliance (`disco_info`, compression)

---

## ğŸ§  Design Philosophy

> **"Good enough is better than perfect."**

ZigXMPP avoids complexity at all costs:
- âŒ No SQL
- âŒ No federation
- âŒ No external dependencies
- âŒ No XML schema enforcement
- âœ… Just Python and standard libraries

Itâ€™s meant for environments like:
- Air-gapped networks
- Small internal teams (up to ~20 users)
- Embedded systems / on-prem devices
- Dev/test deployments without infrastructure burden

---

## ğŸ—ï¸ Architecture

### ğŸ”‘ User Model
- Users defined in `users.txt` (username:password)
- Each user assigned a stable UUID
- All metadata stored in `users.json`

### ğŸ’¬ Message & MUC
- All data lives in RAM during runtime
- Periodically dumped to JSON (`muc_history.json`, etc.)
- MUCs support basic persistent chatrooms and history

### ğŸ’¾ No Database
- No SQL or external DB
- No ORM
- No async drivers
- Just Python dicts + file dumps

---

## ğŸ“‚ Project Structure

```

zigxmpp/
â”œâ”€â”€ zigxmpp.py         # Main server (single file)
â”œâ”€â”€ users.txt          # Username/password definitions
â”œâ”€â”€ users.json         # UUID + metadata (autogenerated)
â”œâ”€â”€ muc\_history.json   # Room message archive
â”œâ”€â”€ cert.pem / key.pem # Auto-generated self-signed cert

````

---

## âš™ï¸ Running

```bash
python3 zigxmpp.py
````

Thatâ€™s it. The server will:

* Load users
* Start XMPP listener with TLS
* Start internal HTTP server for file uploads
* Accept clients using any modern XMPP client

---

## ğŸ‘¥ User Format

`users.txt`:

```
alice:secret123
bob:qwerty
```

On first run, `users.json` will be generated:

```json
{
  "alice": {
    "uuid": "7a23ffb9-4f6e-4e0a-84b4-e2f5c18e4d0e",
    "created": "2025-08-06T10:00:00Z",
    "last_seen": "2025-08-06T10:25:43Z"
  }
}
```

---

## ğŸ“¡ Supported Clients

ZigXMPP works with standard XMPP clients out-of-the-box:

| Client | Platform       | Status   |
| ------ | -------------- | -------- |
| Gajim  | Linux/Windows  | âœ… Tested |
| Dino   | Linux          | âœ… Tested |
| Pidgin | Cross-platform | âœ… Tested |
| Xabber | Android        | âœ… Tested |

---

## ğŸ§ª Limitations

* âš ï¸ Not federated (no server-to-server)
* ğŸ› ï¸ Not fully XEP-compliant (only whatâ€™s required)
* â³ No fine-grained access control or policies
* ğŸ§° Designed for \~10â€“50 users max

---

## ğŸ” Security Notes

* Passwords stored in plain text in `users.txt` (for now)
* UUIDs are hard to guess, used as internal primary keys
* TLS is required (self-signed certs are generated automatically)
* No open registration or external exposure

---

## ğŸ“– License

ZigXMPP is released under the **MIT License**.
See [LICENSE](LICENSE) for full text.

---

## ğŸ’¡ Future Ideas

* WebSocket gateway
* Encrypted history
* Optional password hashing (PBKDF2, bcrypt)
* Web admin UI (maybe)
* Offline messages

---

## ğŸ‘¤ Author

Created by [Zigfi](https://github.com/zigfi7)
Made with care, for systems that deserve to be simple again.

