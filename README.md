# ZigXMPP

A minimal, one-file XMPP server written in pure Python — designed for simplicity, portability, and rapid deployment in air-gapped or internal environments.

**UUID-based identity, file-based storage, no dependencies, no federation. Just works.**

---

## ✨ Why ZigXMPP?

ZigXMPP is not a full-featured XMPP stack. It is a focused, self-contained, embeddable microserver that uses the XMPP protocol **only as a transport layer** — so you can use existing clients like:

- ✅ **Gajim**, **Dino**, **Pidgin**, **Xabber**, etc.
- ✅ No need to develop your own clients
- ✅ No need for complex DNS/federation setups

This project follows the **KISS principle**:  
> Keep It Simple, Stupid.

---

## 🧭 Key Features

- 🧍 UUID-based user identity (stable and secure)
- 🗂️ File-based storage (JSON)
- 🔒 TLS and STARTTLS support (self-signed certs auto-generated)
- 🤝 Multiple clients per account (resource binding supported)
- 🧑‍🤝‍🧑 Roster and presence support
- 💬 MUC (multi-user chat) with persistent history
- ⬆️ HTTP file uploads (XEP-0363)
- 🧪 Basic XMPP feature compliance (`disco_info`, compression)

---

## 🧠 Design Philosophy

> **"Good enough is better than perfect."**

ZigXMPP avoids complexity at all costs:
- ❌ No SQL
- ❌ No federation
- ❌ No external dependencies
- ❌ No XML schema enforcement
- ✅ Just Python and standard libraries

It’s meant for environments like:
- Air-gapped networks
- Small internal teams (up to ~20 users)
- Embedded systems / on-prem devices
- Dev/test deployments without infrastructure burden

---

## 🏗️ Architecture

### 🔑 User Model
- Users defined in `users.txt` (username:password)
- Each user assigned a stable UUID
- All metadata stored in `users.json`

### 💬 Message & MUC
- All data lives in RAM during runtime
- Periodically dumped to JSON (`muc_history.json`, etc.)
- MUCs support basic persistent chatrooms and history

### 💾 No Database
- No SQL or external DB
- No ORM
- No async drivers
- Just Python dicts + file dumps

---

## 📂 Project Structure

```

zigxmpp/
├── zigxmpp.py         # Main server (single file)
├── users.txt          # Username/password definitions
├── users.json         # UUID + metadata (autogenerated)
├── muc\_history.json   # Room message archive
├── cert.pem / key.pem # Auto-generated self-signed cert

````

---

## ⚙️ Running

```bash
python3 zigxmpp.py
````

That’s it. The server will:

* Load users
* Start XMPP listener with TLS
* Start internal HTTP server for file uploads
* Accept clients using any modern XMPP client

---

## 👥 User Format

`users.txt`:

```
alice:secret123
bob:qwerty
```

On first run, `users.json` will be generated:

```json
{
  "alice": {
    "uuid": "7a23ffb9-4f6e-4e0a-84b4-e2f5c18e4d0e",
    "created": "2025-08-06T10:00:00Z",
    "last_seen": "2025-08-06T10:25:43Z"
  }
}
```

---

## 📡 Supported Clients

ZigXMPP works with standard XMPP clients out-of-the-box:

| Client | Platform       | Status   |
| ------ | -------------- | -------- |
| Gajim  | Linux/Windows  | ✅ Tested |
| Dino   | Linux          | ✅ Tested |
| Pidgin | Cross-platform | ✅ Tested |
| Xabber | Android        | ✅ Tested |

---

## 🧪 Limitations

* ⚠️ Not federated (no server-to-server)
* 🛠️ Not fully XEP-compliant (only what’s required)
* ⏳ No fine-grained access control or policies
* 🧰 Designed for \~10–50 users max

---

## 🔐 Security Notes

* Passwords stored in plain text in `users.txt` (for now)
* UUIDs are hard to guess, used as internal primary keys
* TLS is required (self-signed certs are generated automatically)
* No open registration or external exposure

---

## 📖 License

ZigXMPP is released under the **MIT License**.
See [LICENSE](LICENSE) for full text.

---

## 💡 Future Ideas

* WebSocket gateway
* Encrypted history
* Optional password hashing (PBKDF2, bcrypt)
* Web admin UI (maybe)
* Offline messages

---

## 👤 Author

Created by [Zigfi](https://github.com/zigfi7)
Made with care, for systems that deserve to be simple again.

